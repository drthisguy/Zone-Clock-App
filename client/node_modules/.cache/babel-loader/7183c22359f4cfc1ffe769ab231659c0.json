{"ast":null,"code":"import _regeneratorRuntime from\"/Users/page/Google Drive/Sandbox/zoneclock-utility/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/page/Google Drive/Sandbox/zoneclock-utility/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/page/Google Drive/Sandbox/zoneclock-utility/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useRef}from'react';export var useFetch=function useFetch(url){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1],_useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1],_useState5=useState(false),_useState6=_slicedToArray(_useState5,2),hasError=_useState6[0],setError=_useState6[1],_useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1],fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return fetch(url);case 4:response=_context.sent;_context.next=7;return response.json();case 7:result=_context.sent;if(result.status==='OK'){setData(result);console.log(\"fetchData -> result\",result);}else{setError(true);setData(result);setErrorMessage('Nothing found. Check spelling. Or if the problem persist, the resource may be down. Try again later.');}setIsLoading(false);_context.next=17;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);setError(true);setErrorMessage(_context.t0.message);setIsLoading(false);case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);return{data:data,isLoading:isLoading,hasError:hasError,errorMessage:errorMessage};};//used to track previous states for comparison purposes. ex use:  previousItem = usePrevious(itemInput.property),\nexport var usePrevious=function usePrevious(value){var ref=useRef();useEffect(function(){ref.current=value;},[value]);return ref.current;};//force the re-rendering of state.\nexport var useForceUpdate=function useForceUpdate(){var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),value=_useState10[0],setValue=_useState10[1];return function(){return setValue(function(value){return++value;});};// update the state to force render\n};","map":{"version":3,"sources":["/Users/page/Google Drive/Sandbox/zoneclock-utility/client/src/utils/CustomHooks.js"],"names":["useState","useEffect","useRef","useFetch","url","data","setData","isLoading","setIsLoading","hasError","setError","errorMessage","setErrorMessage","fetchData","fetch","response","json","result","status","console","log","message","usePrevious","value","ref","current","useForceUpdate","setValue"],"mappings":"6gBAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,MAA9B,KAA4C,OAA5C,CAGA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,GAAG,CAAI,eACDJ,QAAQ,CAAC,IAAD,CADP,wCACnBK,IADmB,eACbC,OADa,0BAEIN,QAAQ,CAAC,KAAD,CAFZ,yCAExBO,SAFwB,eAEbC,YAFa,0BAGDR,QAAQ,CAAC,KAAD,CAHP,yCAGxBS,QAHwB,eAGdC,QAHc,0BAIUV,QAAQ,CAAC,EAAD,CAJlB,yCAIxBW,YAJwB,eAIVC,eAJU,eAM1BC,SAN0B,0FAMd,uJACTL,YAAY,CAAC,IAAD,CAAZ,CADS,sCAIgBM,CAAAA,KAAK,CAACV,GAAD,CAJrB,QAIDW,QAJC,qCAKSA,CAAAA,QAAQ,CAACC,IAAT,EALT,QAKNC,MALM,eAMP,GAAIA,MAAM,CAACC,MAAP,GAAkB,IAAtB,CAA4B,CAC1BZ,OAAO,CAACW,MAAD,CAAP,CACAE,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAmCH,MAAnC,EACD,CAHD,IAGO,CACLP,QAAQ,CAAC,IAAD,CAAR,CACAJ,OAAO,CAACW,MAAD,CAAP,CACAL,eAAe,CAAC,sGAAD,CAAf,CACD,CAEDJ,YAAY,CAAC,KAAD,CAAZ,CAfO,iFAiBPE,QAAQ,CAAC,IAAD,CAAR,CACAE,eAAe,CAAC,YAAIS,OAAL,CAAf,CACAb,YAAY,CAAC,KAAD,CAAZ,CAnBO,qEANc,kBAM1BK,CAAAA,SAN0B,2CA6B3BZ,SAAS,CAAC,UAAM,CACZY,SAAS,GACR,CAFI,CAEF,EAFE,CAAT,CAIA,MAAO,CAAER,IAAI,CAAJA,IAAF,CAAQE,SAAS,CAATA,SAAR,CAAmBE,QAAQ,CAARA,QAAnB,CAA6BE,YAAY,CAAZA,YAA7B,CAAP,CACH,CAlCM,CAoCP;AACC,MAAO,IAAMW,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAC,KAAK,CAAI,CAE7B,GAAMC,CAAAA,GAAG,CAAGtB,MAAM,EAAlB,CACAD,SAAS,CAAC,UAAM,CAChBuB,GAAG,CAACC,OAAJ,CAAcF,KAAd,CACC,CAFQ,CAEN,CAACA,KAAD,CAFM,CAAT,CAIJ,MAAOC,CAAAA,GAAG,CAACC,OAAX,CACH,CARO,CAUR;AACA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,gBACN1B,QAAQ,CAAC,CAAD,CADF,0CACzBuB,KADyB,gBAClBI,QADkB,gBAEhC,MAAO,kBAAMA,CAAAA,QAAQ,CAAC,SAAAJ,KAAK,QAAI,EAAEA,KAAN,EAAN,CAAd,EAAP,CAAyC;AAC5C,CAHM","sourcesContent":["import { useState, useEffect, useRef } from 'react';\n\n\nexport const useFetch = url => {\n    const [ data, setData ] = useState(null),\n     [ isLoading, setIsLoading ] = useState(false),\n     [ hasError, setError ] = useState(false),\n     [ errorMessage, setErrorMessage ] = useState(''),\n\n     fetchData = async () => {\n        setIsLoading(true)\n\n        try {\n          const response = await fetch(url),\n           result = await response.json();\n          if (result.status === 'OK') {\n            setData(result)\n            console.log(\"fetchData -> result\", result)\n          } else {\n            setError(true)\n            setData(result)\n            setErrorMessage('Nothing found. Check spelling. Or if the problem persist, the resource may be down. Try again later.')\n          }\n          \n          setIsLoading(false)\n        } catch (err) {\n          setError(true)\n          setErrorMessage(err.message)\n          setIsLoading(false)\n        }\n    }\n    \n    useEffect(() => {\n        fetchData()\n        }, []);\n    \n    return { data, isLoading, hasError, errorMessage }\n}\n\n//used to track previous states for comparison purposes. ex use:  previousItem = usePrevious(itemInput.property),\n export const usePrevious = value => {\n\n        const ref = useRef();\n        useEffect(() => {\n        ref.current = value;\n        }, [value]);\n\n    return ref.current;\n}\n\n//force the re-rendering of state.\nexport const useForceUpdate = () => {\n    const [value, setValue] = useState(0); \n    return () => setValue(value => ++value); // update the state to force render\n}"]},"metadata":{},"sourceType":"module"}